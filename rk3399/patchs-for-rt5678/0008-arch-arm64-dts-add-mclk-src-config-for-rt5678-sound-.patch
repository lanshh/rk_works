From 832f257e6b766edd87d5b413db9f6d9b0ffd3146 Mon Sep 17 00:00:00 2001
From: lanshh <lsh@rock-chips.com>
Date: Tue, 11 Dec 2018 14:22:18 +0800
Subject: [PATCH] arch: arm64: dts: add mclk-src config for rt5678-sound sound

Signed-off-by: lanshh <lsh@rock-chips.com>
---
 arch/arm64/boot/dts/rockchip/rk3399-brio3.dtsi                    | 2 +-
 arch/arm64/boot/dts/rockchip/rk3399-excavator-sapphire-brio3.dtsi | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-brio3.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-brio3.dtsi
index 5239012..bcb7622 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-brio3.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-brio3.dtsi
@@ -1481,7 +1481,7 @@
 	};
 
 	cru: clock-controller@ff760000 {
-		compatible = "rockchip,rk3399-cru";
+		compatible = "rockchip,rk3399-cru", "syscon";
 		reg = <0x0 0xff760000 0x0 0x1000>;
 		#clock-cells = <1>;
 		#reset-cells = <1>;
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-excavator-sapphire-brio3.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-excavator-sapphire-brio3.dtsi
index f654be9..d43575e 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-excavator-sapphire-brio3.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-excavator-sapphire-brio3.dtsi
@@ -72,6 +72,7 @@
 		simple-audio-card,format = "i2s";
 		simple-audio-card,name = "realtek,rt5678-codec";
 		simple-audio-card,mclk-fs = <256>;
+		simple-audio-card,mclk-src = <1>; /* 0:i2s0  1:i2s1 2:i2s2 */
 		rockchip,cru = <&cru>;
 		simple-audio-card,widgets =
 			"Microphone", "Mic Jack",
-- 
1.9.1

